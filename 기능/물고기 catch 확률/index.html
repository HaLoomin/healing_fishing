<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>기능:확률</title>
</head>

<body>
    <script>
        var fish_catch = 0;
        var fish_catch_rand_num = 0;
        //해당 변수 이상일경우 catch
        var percent = 90;
        //물고기 catch 확률 돌리기
        var catch_start1, catch_start2;
        //테스트용
        var test1, test2;
        //물고기 catch 확률
        function fish_catch_random() {
            fish_catch_rand_num = parseInt(Math.random() * 100);
            //물고기 catch if처리
            if (fish_catch_rand_num >= percent) {
                fish_catch = 1;
            }
            //물고기를 잡을경우/ 인터벌 중단
            if (fish_catch == 1) {
                //테스트용
                test1.innerText = fish_catch_rand_num;
                //테스트용
                test2.innerText = fish_catch;

                fish_catch = 0;
                fish_catch_rand_num = 0;

                fish_catch_stop();
            }
        }

        //테스트용 삭제필요
        function test1() {
            test1 = document.getElementById("if_fish_catch");
            test1.innerText = fish_catch_rand_num;
            test2 = document.getElementById("if_fish_catch1");
            test2.innerText = fish_catch;
        }
        //물고기 잡기 시작
        function fish_catch_start() {
            catch_start1 = setInterval(fish_catch_random, 1000);
            catch_start2 = setInterval(test1, 1000);
        }
        //물고기 잡기 중지
        function fish_catch_stop() {
            clearInterval(catch_start1);
            clearInterval(catch_start2);
        }
    </script>
    <!--테스트용-->
    <p>확률 작동 확인</p>
    <input type="button" value="물고기 잡기 시작" onclick="fish_catch_start()" />
    <p>물고기 잡을 확률 랜덤 돌린 값 : <span id="if_fish_catch"></span></p>
    <p>물고기 잡은지 여부 확인 : <span id="if_fish_catch1"></span></p>

    <!--테스트용-->
</body>

</html>